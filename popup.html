<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Path Blocker (AI Edition)</title>
    <link rel="stylesheet" href="popup.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-shield-halved"></i> Path Blocker</h1>
            <a href="setting.html" target="_blank" title="打开设置" id="settingsLink"><i class="fas fa-cog"></i></a>
        </header>

        <div class="content-wrapper">
            <section class="focus-score-section">
                <div class="score-display">
                    <span id="focusScore" class="score-value">--</span>
                    <span class="score-label">专注度</span>
                </div>
            </section>

            <section class="mode-section">
                <div class="mode-switcher">
                    <button class="mode-btn" id="modeHardcore" data-mode="hardcore" title="仅启用永久锁定列表"><i class="fas fa-lock"></i> 规则</button>
                    <button class="mode-btn" id="modeHybrid" data-mode="hybrid" title="优先永久锁定，再由AI守护"><i class="fas fa-wand-magic-sparkles"></i> 混合</button>
                    <button class="mode-btn" id="modeAi" data-mode="ai" title="仅由AI根据意图守护"><i class="fas fa-brain"></i> AI</button>
                </div>

                <div class="ai-control-area">
                    <div class="ai-input-group">
                        <i class="fas fa-bullseye"></i>
                        <input type="text" id="aiIntentInput" placeholder="设定当前意图 (如: 学习)">
                    </div>
                <button id="setIntentBtn" title="设定AI意图">设定</button>
                </div>
                <div class="api-status-popup" id="apiStatusContainer" style="display: none;">
                    <span id="apiStatusText"></span>
                    <button id="refreshApiBtn" title="刷新API状态"><i class="fas fa-sync-alt"></i></button>
                </div>
            </section>

            <section class="add-section">
                <button id="addCurrentPageBtn" class="quick-add-btn">
                    <i class="fas fa-crosshairs"></i> 一键锁定当前页
                </button>
                
                <div class="input-grid">
                    <input type="text" id="nameInput" placeholder="规则名称">
                    <input type="text" id="pathInput" placeholder="URL 路径">
                    <select id="groupSelect"></select>
                </div>
                <button id="addBtn">
                    <i class="fas fa-plus-circle"></i> 永久锁定
                </button>
                <p class="note">
                    <i class="fas fa-exclamation-triangle"></i> 警告：规则一旦添加，将无法删除。
                </p>
            </section>

            <section class="list-section">
                <h2><i class="fas fa-list-ul"></i> 已锁定列表</h2>
                <div id="groupsContainer"></div>
            </section>
        </div>
    </div>
    <script src="popup.js"></script>


    <div id="customDialogOverlay" class="dialog-overlay hidden">
        <div id="customDialogBox" class="dialog-box">
            <h3 id="dialogTitle">对话框标题</h3>
            <p id="dialogMessage">这是一条消息。</p>
            <input type="text" id="dialogInput" class="dialog-input" style="display: none;">
            <select id="dialogGroupSelect" class="dialog-input" style="display: none;"></select>
            <div class="dialog-actions">
                <button id="dialogCancelBtn" class="dialog-btn secondary">取消</button>
                <button id="dialogConfirmBtn" class="dialog-btn primary">确认</button>
            </div>
        </div>
    </div>
    </body>
</body>
</html>